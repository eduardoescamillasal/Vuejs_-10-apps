{"remainingRequest":"/home/raskolnikov/Vue_training/vue1-tut/vue3/node_modules/babel-loader/lib/index.js!/home/raskolnikov/Vue_training/vue1-tut/vue3/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/raskolnikov/Vue_training/vue1-tut/vue3/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/raskolnikov/Vue_training/vue1-tut/vue3/src/pages/UserCrud.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/raskolnikov/Vue_training/vue1-tut/vue3/src/pages/UserCrud.vue","mtime":1610066161261},{"path":"/home/raskolnikov/Vue_training/vue1-tut/vue3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/raskolnikov/Vue_training/vue1-tut/vue3/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/raskolnikov/Vue_training/vue1-tut/vue3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/raskolnikov/Vue_training/vue1-tut/vue3/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvcmFza29sbmlrb3YvVnVlX3RyYWluaW5nL3Z1ZTEtdHV0L3Z1ZTMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgeyBvbk1vdW50ZWQsIHJlYWN0aXZlIH0gZnJvbSAndnVlJzsKaW1wb3J0IGF4aW9zIGZyb20gJy4uL3BsdWdpbnMvYXhpb3MnOwppbXBvcnQgQ3JlYXRlIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckNydWQvQ3JlYXRlJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIENyZWF0ZTogQ3JlYXRlCiAgfSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICB2YXIgc3RhdGUgPSByZWFjdGl2ZSh7CiAgICAgIHVzZXJzOiBbXQogICAgfSk7CiAgICBvbk1vdW50ZWQoIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBfeWllbGQkYXhpb3MkZ2V0LCBkYXRhOwoKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBheGlvcy5nZXQoIi91c2VycyIpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIF95aWVsZCRheGlvcyRnZXQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIGRhdGEgPSBfeWllbGQkYXhpb3MkZ2V0LmRhdGE7CiAgICAgICAgICAgICAgc3RhdGUudXNlcnMgPSBkYXRhOwoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSk7CgogICAgZnVuY3Rpb24gbmV4dCgpIHsKICAgICAgcmV0dXJuIF9uZXh0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgZnVuY3Rpb24gX25leHQoKSB7CiAgICAgIF9uZXh0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgX3lpZWxkJGF4aW9zJGdldDIsIGRhdGE7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MuZ2V0KCIvdXNlcnM/cGFnZT0yIik7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF95aWVsZCRheGlvcyRnZXQyID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBkYXRhID0gX3lpZWxkJGF4aW9zJGdldDIuZGF0YTsKICAgICAgICAgICAgICAgIHN0YXRlLnVzZXJzID0gZGF0YTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpOwogICAgICByZXR1cm4gX25leHQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwcmV2KCkgewogICAgICByZXR1cm4gX3ByZXYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBfcHJldigpIHsKICAgICAgX3ByZXYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciBfeWllbGQkYXhpb3MkZ2V0MywgZGF0YTsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5nZXQoIi91c2Vycz9wYWdlPTEiKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgX3lpZWxkJGF4aW9zJGdldDMgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgIGRhdGEgPSBfeWllbGQkYXhpb3MkZ2V0My5kYXRhOwogICAgICAgICAgICAgICAgc3RhdGUudXNlcnMgPSBkYXRhOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSk7CiAgICAgIHJldHVybiBfcHJldi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQoKICAgIGZ1bmN0aW9uIGRlc3Ryb3koX3gpIHsKICAgICAgcmV0dXJuIF9kZXN0cm95LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgZnVuY3Rpb24gX2Rlc3Ryb3koKSB7CiAgICAgIF9kZXN0cm95ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNChpZCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MuZGVsZXRlKCIvdXNlcnMvIi5jb25jYXQoaWQpKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgc3RhdGUudXNlcnMgPSBzdGF0ZS51c2Vycy5maWx0ZXIoZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHVzZXIuX2lkICE9PSBpZDsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQpOwogICAgICB9KSk7CiAgICAgIHJldHVybiBfZGVzdHJveS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZFVzZXIoZGF0YSkgewogICAgICBzdGF0ZS51c2Vycy5wdXNoKGRhdGEpOwogICAgfQoKICAgIHJldHVybiB7CiAgICAgIHN0YXRlOiBzdGF0ZSwKICAgICAgbmV4dDogbmV4dCwKICAgICAgcHJldjogcHJldiwKICAgICAgZGVzdHJveTogZGVzdHJveQogICAgfTsKICB9Cn07"},{"version":3,"sources":["/home/raskolnikov/Vue_training/vue1-tut/vue3/src/pages/UserCrud.vue"],"names":[],"mappings":";;;AA+DA,SAAS,SAAT,EAAoB,QAApB,QAAoC,KAApC;AACA,OAAO,KAAP,MAAkB,kBAAlB;AACA,OAAO,MAAP,MAAmB,+BAAnB;AACA,eAAe;AACb,EAAA,UAAU,EAAE;AAAE,IAAA,MAAK,EAAL;AAAF,GADC;AAEb,EAAA,KAFa,mBAEL;AACN,QAAM,KAAI,GAAI,QAAQ,CAAC;AACrB,MAAA,KAAK,EAAE;AADc,KAAD,CAAtB;AAGA,IAAA,SAAS,uEAAC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACe,KAAK,CAAC,GAAN,UADf;;AAAA;AAAA;AACA,cAAA,IADA,oBACA,IADA;AAER,cAAA,KAAK,CAAC,KAAN,GAAc,IAAd;;AAFQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD,GAAT;;AAJM,aASU,IATV;AAAA;AAAA;;AAAA;AAAA,sEASL;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACwB,KAAK,CAAC,GAAN,iBADxB;;AAAA;AAAA;AACS,gBAAA,IADT,qBACS,IADT;AAEC,gBAAA,KAAK,CAAC,KAAN,GAAc,IAAd;;AAFD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OATK;AAAA;AAAA;;AAAA,aAcS,IAdT;AAAA;AAAA;;AAAA;AAAA,sEAcN;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACwB,KAAK,CAAC,GAAN,iBADxB;;AAAA;AAAA;AACS,gBAAA,IADT,qBACS,IADT;AAEC,gBAAA,KAAK,CAAC,KAAN,GAAc,IAAd;;AAFD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAdM;AAAA;AAAA;;AAAA,aAoBQ,OApBR;AAAA;AAAA;;AAAA;AAAA,yEAoBP,kBAAuB,EAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACQ,KAAK,CAAC,MAAN,kBAAuB,EAAvB,EADR;;AAAA;AAEE,gBAAA,KAAK,CAAC,KAAN,GAAc,KAAK,CAAC,KAAN,CAAY,MAAZ,CAAmB,UAAA,IAAG;AAAA,yBAAK,IAAI,CAAC,GAAL,KAAa,EAAlB;AAAA,iBAAtB,CAAd;;AAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OApBO;AAAA;AAAA;;AAyBP,aAAS,OAAT,CAAiB,IAAjB,EAAuB;AACrB,MAAA,KAAK,CAAC,KAAN,CAAY,IAAZ,CAAiB,IAAjB;AACF;;AAEC,WAAO;AAAE,MAAA,KAAK,EAAL,KAAF;AAAS,MAAA,IAAI,EAAJ,IAAT;AAAe,MAAA,IAAI,EAAJ,IAAf;AAAqB,MAAA,OAAM,EAAN;AAArB,KAAP;AACD;AAhCY,CAAf","sourcesContent":["<template>\n  <section class=\"flex w-full\">\n    <div class=\"m-auto\">\n      <div class=\"mt-10\">\n        <Create @newUserAdded=\"addUser\" />\n        <table>\n          <thead>\n            <tr>\n              <th class=\"px-4 py-2 border\">ID</th>\n              <th class=\"px-4 py-2 border\">Avatar</th>\n              <th class=\"px-4 py-2 border\">Name</th>\n              <th class=\"px-4 py-2 border\">Email</th>\n              <th class=\"px-4 py-2 border\">Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"user in state.users\" :key=\"user.id\">\n              <td class=\"border px-4 py-2\">{{ user._id}}</td>\n              <td class=\"border px-4 py-2\">\n                <img\n                  :src=\"user.avatar\"\n                  :alt=\"user.name\"\n                  width=\"50\"\n                  class=\"rounded-full\"\n                  />\n              </td>\n              <td class=\"border px-4 py-2\">{{ user.name }}</td>\n              <td class=\"border px-4 py-2\">{{ user.email }}</td>\n              <td class=\"border px-4 py-2\">\n                <button\n                  class=\"px-2 py-1 bg-red-800 rounded text-white\"\n                  @click=\"destroy(user._id)\">\n                    Delete\n                </button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n        <div class=\"flex  justify-between\">\n          <button\n            class=\"px-3 py-2 border rounded\"\n            @click=\"prev\"\n            :disabled=\"state.users.page === 1\"\n            :class=\"state.users.page === 1 ? 'bg-gray-100' : 'hover:shadow'\">\n              Prev\n          </button>\n          <button\n            class=\"px-3 py-2 border rounded\"\n            @click=\"next\"\n            :disabled=\"state.users.page === state.users.total_pages\"\n            :class=\"\n              state.users.page === state.users.total_pages\n                ? 'bg-gray-100'\n                : 'hover:shadow'\">\n              Next\n          </button>\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script>\nimport { onMounted, reactive } from 'vue';\nimport axios from '../plugins/axios';\nimport Create from '../components/UserCrud/Create';\nexport default {\n  components: { Create },\n  setup() {\n    const state = reactive({\n      users: [],\n    });\n    onMounted(async () => {\n      const { data } = await axios.get(`/users`);\n      state.users = data;\n    });\n\n     async function next() {\n      const { data } = await axios.get(`/users?page=2`);\n      state.users = data;\n    }\n\n    async function prev() {\n     const { data } = await axios.get(`/users?page=1`);\n     state.users = data;\n   }\n\n\n   async function destroy(id) {\n     await axios.delete(`/users/${id}`);\n     state.users = state.users.filter(user => user._id !== id);\n   }\n\n   function addUser(data) {\n     state.users.push(data);\n   }\n\n    return { state, next, prev, destroy };\n  },\n};\n</script>\n\n<style>\n\n</style>\n"],"sourceRoot":""}]}