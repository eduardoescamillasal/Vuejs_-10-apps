{"remainingRequest":"/home/raskolnikov/Vue_training/vue1-tut/vue3/node_modules/babel-loader/lib/index.js!/home/raskolnikov/Vue_training/vue1-tut/vue3/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/raskolnikov/Vue_training/vue1-tut/vue3/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/raskolnikov/Vue_training/vue1-tut/vue3/src/pages/Chat.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/raskolnikov/Vue_training/vue1-tut/vue3/src/pages/Chat.vue","mtime":1609805596429},{"path":"/home/raskolnikov/Vue_training/vue1-tut/vue3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/raskolnikov/Vue_training/vue1-tut/vue3/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/raskolnikov/Vue_training/vue1-tut/vue3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/raskolnikov/Vue_training/vue1-tut/vue3/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvcmFza29sbmlrb3YvVnVlX3RyYWluaW5nL3Z1ZTEtdHV0L3Z1ZTMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvaG9tZS9yYXNrb2xuaWtvdi9WdWVfdHJhaW5pbmcvdnVlMS10dXQvdnVlMy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCB7IG9uTW91bnRlZCwgcmVhY3RpdmUgfSBmcm9tICd2dWUnOwppbXBvcnQgZmlyZWJhc2UsIHsgY2hhdHNSZWYgfSBmcm9tICcuLi91dGlsaXRpZXMvZmlyZWJhc2UnOwpleHBvcnQgZGVmYXVsdCB7CiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIHN0YXRlID0gcmVhY3RpdmUoewogICAgICBjaGF0czogW10sCiAgICAgIG1lc3NhZ2U6ICIiLAogICAgICB1c2VySWQ6IG51bGwKICAgIH0pOwogICAgb25Nb3VudGVkKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY2hhdHNSZWYub24oJ2NoaWxkX2FkZGVkJywgZnVuY3Rpb24gKHNuYXBzaG90KSB7CiAgICAgICAgICAgICAgICBzdGF0ZS51c2VySWQgPSBmaXJlYmFzZS5kZWZhdWx0LmF1dGgoKS5jdXJyZW50VXNlci51aWQ7CiAgICAgICAgICAgICAgICBzdGF0ZS5jaGF0cy5wdXNoKF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICAgICAgICBrZXk6IHNuYXBzaG90LmtleQogICAgICAgICAgICAgICAgfSwgc25hcHNob3QudmFsKCkpKTsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkpOwoKICAgIGZ1bmN0aW9uIGFkZE1lc3NhZ2UoKSB7CiAgICAgIHZhciBuZXdDaGF0ID0gY2hhdHNSZWYucHVzaCgpOwogICAgICBuZXdDaGF0LnNldCh7CiAgICAgICAgdXNlcklkOiBzdGF0ZS51c2VySWQsCiAgICAgICAgbWVzc2FnZTogc3RhdGUubWVzc2FnZQogICAgICB9KTsKICAgICAgc3RhdGUubWVzc2FnZSA9ICIiOwogICAgfQoKICAgIHJldHVybiB7CiAgICAgIHN0YXRlOiBzdGF0ZSwKICAgICAgYWRkTWVzc2FnZTogYWRkTWVzc2FnZQogICAgfTsKICB9Cn07"},{"version":3,"sources":["/home/raskolnikov/Vue_training/vue1-tut/vue3/src/pages/Chat.vue"],"names":[],"mappings":";;;AA6BA,SAAS,SAAT,EAAoB,QAApB,QAAoC,KAApC;AACA,OAAO,QAAP,IAAmB,QAAnB,QAAmC,uBAAnC;AACA,eAAe;AACb,EAAA,KADa,mBACL;AACN,QAAM,KAAI,GAAI,QAAQ,CAAC;AACrB,MAAA,KAAK,EAAE,EADc;AAErB,MAAA,OAAO,EAAE,EAFY;AAGrB,MAAA,MAAM,EAAE;AAHa,KAAD,CAAtB;AAKA,IAAA,SAAS,uEAAC;AAAA;AAAA;AAAA;AAAA;AACR,cAAA,QAAQ,CAAC,EAAT,CAAY,aAAZ,EAA2B,UAAC,QAAD,EAAc;AACvC,gBAAA,KAAK,CAAC,MAAN,GAAe,QAAQ,CAAC,OAAT,CAAiB,IAAjB,GAAwB,WAAxB,CAAoC,GAAnD;AACA,gBAAA,KAAK,CAAC,KAAN,CAAY,IAAZ;AAAmB,kBAAA,GAAG,EAAC,QAAQ,CAAC;AAAhC,mBAAwC,QAAQ,CAAC,GAAT,EAAxC;AACD,eAHD;;AADQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD,GAAT;;AAOA,aAAS,UAAT,GAAsB;AACpB,UAAM,OAAM,GAAI,QAAQ,CAAC,IAAT,EAAhB;AACA,MAAA,OAAO,CAAC,GAAR,CAAY;AAAE,QAAA,MAAM,EAAE,KAAK,CAAC,MAAhB;AAAwB,QAAA,OAAO,EAAE,KAAK,CAAC;AAAvC,OAAZ;AACA,MAAA,KAAK,CAAC,OAAN,GAAgB,EAAhB;AACF;;AAEA,WAAO;AAAE,MAAA,KAAK,EAAL,KAAF;AAAS,MAAA,UAAS,EAAT;AAAT,KAAP;AACD;AArBY,CAAf","sourcesContent":["<template>\n  <section class=\"flex w-full\">\n    <div class=\"m-auto\">\n      <h1 class=\"text-center text-2xl\">Real Time Chat</h1>\n      <div class=\"border rounded-lg\">\n        <div class=\"h-64 p-2\">\n          <div\n            v-for=\"chat in state.chats\"\n            :key=\"chat.message\"\n            class=\"w-full\"\n            :class=\"chat.userId === state.userId ? 'text-right' : '' \"\n            >\n            {{ chat.message }}\n          </div>\n        </div>\n        <div class=\"h-8 p-2\">\n          <input\n          v-model=\"state.message\"\n          placeholder=\"Start Typing...\"\n          class=\"p-1 border rounded shadow\"\n          @keydown.enter=\"addMessage\"\n          />\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script>\nimport { onMounted, reactive } from 'vue';\nimport firebase, { chatsRef } from '../utilities/firebase';\nexport default {\n  setup() {\n    const state = reactive({\n      chats: [],\n      message: \"\",\n      userId: null,\n    });\n    onMounted(async () => {\n      chatsRef.on('child_added', (snapshot) => {\n        state.userId = firebase.default.auth().currentUser.uid;\n        state.chats.push({ key:snapshot.key, ...snapshot.val() });\n      });\n    });\n\n    function addMessage() {\n      const newChat = chatsRef.push();\n      newChat.set({ userId: state.userId, message: state.message });\n      state.message = \"\";\n    }\n\n    return { state, addMessage };\n  },\n};\n</script>\n\n<style>\n\n</style>\n"],"sourceRoot":""}]}