{"remainingRequest":"/home/raskolnikov/Vue_training/vue1-tut/vue3/node_modules/babel-loader/lib/index.js!/home/raskolnikov/Vue_training/vue1-tut/vue3/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/raskolnikov/Vue_training/vue1-tut/vue3/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/raskolnikov/Vue_training/vue1-tut/vue3/src/pages/Chat.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/raskolnikov/Vue_training/vue1-tut/vue3/src/pages/Chat.vue","mtime":1609893940935},{"path":"/home/raskolnikov/Vue_training/vue1-tut/vue3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/raskolnikov/Vue_training/vue1-tut/vue3/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/raskolnikov/Vue_training/vue1-tut/vue3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/raskolnikov/Vue_training/vue1-tut/vue3/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvcmFza29sbmlrb3YvVnVlX3RyYWluaW5nL3Z1ZTEtdHV0L3Z1ZTMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvaG9tZS9yYXNrb2xuaWtvdi9WdWVfdHJhaW5pbmcvdnVlMS10dXQvdnVlMy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCB7IGNvbXB1dGVkLCBvbk1vdW50ZWQsIHJlYWN0aXZlIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgY2hhdHNSZWYgfSBmcm9tICcuLi91dGlsaXRpZXMvZmlyZWJhc2UnOwppbXBvcnQgeyB1c2VTdG9yZSB9IGZyb20gJ3Z1ZXgnOwpleHBvcnQgZGVmYXVsdCB7CiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIHN0YXRlID0gcmVhY3RpdmUoewogICAgICBjaGF0czogW10sCiAgICAgIG1lc3NhZ2U6ICIiCiAgICB9KTsKICAgIHZhciBzdG9yZSA9IHVzZVN0b3JlKCk7CiAgICB2YXIgdXNlcklkID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gc3RvcmUuc3RhdGUuYXV0aFVzZXIudWlkOwogICAgfSk7CiAgICBvbk1vdW50ZWQoIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjaGF0c1JlZi5vbignY2hpbGRfYWRkZWQnLCBmdW5jdGlvbiAoc25hcHNob3QpIHsKICAgICAgICAgICAgICAgIHN0YXRlLmNoYXRzLnB1c2goX29iamVjdFNwcmVhZCh7CiAgICAgICAgICAgICAgICAgIGtleTogc25hcHNob3Qua2V5CiAgICAgICAgICAgICAgICB9LCBzbmFwc2hvdC52YWwoKSkpOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSk7CgogICAgZnVuY3Rpb24gYWRkTWVzc2FnZSgpIHsKICAgICAgdmFyIG5ld0NoYXQgPSBjaGF0c1JlZi5wdXNoKCk7CiAgICAgIG5ld0NoYXQuc2V0KHsKICAgICAgICB1c2VySWQ6IHN0YXRlLnVzZXJJZCwKICAgICAgICBtZXNzYWdlOiBzdGF0ZS5tZXNzYWdlCiAgICAgIH0pOwogICAgICBzdGF0ZS5tZXNzYWdlID0gIiI7CiAgICB9CgogICAgcmV0dXJuIHsKICAgICAgc3RhdGU6IHN0YXRlLAogICAgICBhZGRNZXNzYWdlOiBhZGRNZXNzYWdlLAogICAgICB1c2VySWQ6IHVzZXJJZAogICAgfTsKICB9Cn07"},{"version":3,"sources":["/home/raskolnikov/Vue_training/vue1-tut/vue3/src/pages/Chat.vue"],"names":[],"mappings":";;;AA6BA,SAAS,QAAT,EAAmB,SAAnB,EAA8B,QAA9B,QAA8C,KAA9C;AACA,SAAS,QAAT,QAAyB,uBAAzB;AACA,SAAS,QAAT,QAAyB,MAAzB;AACA,eAAe;AACb,EAAA,KADa,mBACL;AACN,QAAM,KAAI,GAAI,QAAQ,CAAC;AACrB,MAAA,KAAK,EAAE,EADc;AAErB,MAAA,OAAO,EAAE;AAFY,KAAD,CAAtB;AAKA,QAAM,KAAI,GAAI,QAAQ,EAAtB;AACA,QAAM,MAAK,GAAI,QAAQ,CAAC;AAAA,aAAM,KAAK,CAAC,KAAN,CAAY,QAAZ,CAAqB,GAA3B;AAAA,KAAD,CAAvB;AAEA,IAAA,SAAS,uEAAC;AAAA;AAAA;AAAA;AAAA;AACR,cAAA,QAAQ,CAAC,EAAT,CAAY,aAAZ,EAA2B,UAAC,QAAD,EAAc;AACvC,gBAAA,KAAK,CAAC,KAAN,CAAY,IAAZ;AAAmB,kBAAA,GAAG,EAAC,QAAQ,CAAC;AAAhC,mBAAwC,QAAQ,CAAC,GAAT,EAAxC;AACD,eAFD;;AADQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD,GAAT;;AAMA,aAAS,UAAT,GAAsB;AACpB,UAAM,OAAM,GAAI,QAAQ,CAAC,IAAT,EAAhB;AACA,MAAA,OAAO,CAAC,GAAR,CAAY;AAAE,QAAA,MAAM,EAAE,KAAK,CAAC,MAAhB;AAAwB,QAAA,OAAO,EAAE,KAAK,CAAC;AAAvC,OAAZ;AACA,MAAA,KAAK,CAAC,OAAN,GAAgB,EAAhB;AACF;;AAEA,WAAO;AAAE,MAAA,KAAK,EAAL,KAAF;AAAS,MAAA,UAAU,EAAV,UAAT;AAAqB,MAAA,MAAK,EAAL;AAArB,KAAP;AACD;AAvBY,CAAf","sourcesContent":["<template>\n  <section class=\"flex w-full\">\n    <div class=\"m-auto\">\n      <h1 class=\"text-center text-2xl\">Real Time Chat</h1>\n      <div class=\"border rounded-lg\">\n        <div class=\"h-64 p-2\">\n          <div\n            v-for=\"chat in state.chats\"\n            :key=\"chat.message\"\n            class=\"w-full\"\n            :class=\"chat.userId === userId ? 'text-right' : '' \"\n            >\n            {{ chat.message }}\n          </div>\n        </div>\n        <div class=\"h-8 p-2\">\n          <input\n          v-model=\"state.message\"\n          placeholder=\"Start Typing...\"\n          class=\"p-1 border rounded shadow\"\n          @keydown.enter=\"addMessage\"\n          />\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script>\nimport { computed, onMounted, reactive } from 'vue';\nimport { chatsRef } from '../utilities/firebase';\nimport { useStore } from 'vuex';\nexport default {\n  setup() {\n    const state = reactive({\n      chats: [],\n      message: \"\",\n    });\n\n    const store = useStore();\n    const userId = computed(() => store.state.authUser.uid);\n\n    onMounted(async () => {\n      chatsRef.on('child_added', (snapshot) => {\n        state.chats.push({ key:snapshot.key, ...snapshot.val() });\n      });\n    });\n\n    function addMessage() {\n      const newChat = chatsRef.push();\n      newChat.set({ userId: state.userId, message: state.message });\n      state.message = \"\";\n    }\n\n    return { state, addMessage, userId };\n  },\n};\n</script>\n\n<style>\n\n</style>\n"],"sourceRoot":""}]}