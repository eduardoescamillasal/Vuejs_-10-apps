{"remainingRequest":"/home/raskolnikov/Vue_training/vue1-tut/vue3/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/raskolnikov/Vue_training/vue1-tut/vue3/src/pages/Chat.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/raskolnikov/Vue_training/vue1-tut/vue3/src/pages/Chat.vue","mtime":1609805596429},{"path":"/home/raskolnikov/Vue_training/vue1-tut/vue3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/raskolnikov/Vue_training/vue1-tut/vue3/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/raskolnikov/Vue_training/vue1-tut/vue3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/raskolnikov/Vue_training/vue1-tut/vue3/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IG9uTW91bnRlZCwgcmVhY3RpdmUgfSBmcm9tICd2dWUnOwppbXBvcnQgZmlyZWJhc2UsIHsgY2hhdHNSZWYgfSBmcm9tICcuLi91dGlsaXRpZXMvZmlyZWJhc2UnOwpleHBvcnQgZGVmYXVsdCB7CiAgc2V0dXAoKSB7CiAgICBjb25zdCBzdGF0ZSA9IHJlYWN0aXZlKHsKICAgICAgY2hhdHM6IFtdLAogICAgICBtZXNzYWdlOiAiIiwKICAgICAgdXNlcklkOiBudWxsLAogICAgfSk7CiAgICBvbk1vdW50ZWQoYXN5bmMgKCkgPT4gewogICAgICBjaGF0c1JlZi5vbignY2hpbGRfYWRkZWQnLCAoc25hcHNob3QpID0+IHsKICAgICAgICBzdGF0ZS51c2VySWQgPSBmaXJlYmFzZS5kZWZhdWx0LmF1dGgoKS5jdXJyZW50VXNlci51aWQ7CiAgICAgICAgc3RhdGUuY2hhdHMucHVzaCh7IGtleTpzbmFwc2hvdC5rZXksIC4uLnNuYXBzaG90LnZhbCgpIH0pOwogICAgICB9KTsKICAgIH0pOwoKICAgIGZ1bmN0aW9uIGFkZE1lc3NhZ2UoKSB7CiAgICAgIGNvbnN0IG5ld0NoYXQgPSBjaGF0c1JlZi5wdXNoKCk7CiAgICAgIG5ld0NoYXQuc2V0KHsgdXNlcklkOiBzdGF0ZS51c2VySWQsIG1lc3NhZ2U6IHN0YXRlLm1lc3NhZ2UgfSk7CiAgICAgIHN0YXRlLm1lc3NhZ2UgPSAiIjsKICAgIH0KCiAgICByZXR1cm4geyBzdGF0ZSwgYWRkTWVzc2FnZSB9OwogIH0sCn07Cg=="},{"version":3,"sources":["/home/raskolnikov/Vue_training/vue1-tut/vue3/src/pages/Chat.vue"],"names":[],"mappings":";AA6BA,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AACzC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC1D,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACN,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACrB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;MACT,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;MACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACd,CAAC,CAAC;IACF,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;MACpB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE;QACvC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACtD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;MAC3D,CAAC,CAAC;IACJ,CAAC,CAAC;;IAEF,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MACpB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAC/B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;MAC7D,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;IACpB;;IAEA,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;EAC9B,CAAC;AACH,CAAC","file":"/home/raskolnikov/Vue_training/vue1-tut/vue3/src/pages/Chat.vue","sourceRoot":"","sourcesContent":["<template>\n  <section class=\"flex w-full\">\n    <div class=\"m-auto\">\n      <h1 class=\"text-center text-2xl\">Real Time Chat</h1>\n      <div class=\"border rounded-lg\">\n        <div class=\"h-64 p-2\">\n          <div\n            v-for=\"chat in state.chats\"\n            :key=\"chat.message\"\n            class=\"w-full\"\n            :class=\"chat.userId === state.userId ? 'text-right' : '' \"\n            >\n            {{ chat.message }}\n          </div>\n        </div>\n        <div class=\"h-8 p-2\">\n          <input\n          v-model=\"state.message\"\n          placeholder=\"Start Typing...\"\n          class=\"p-1 border rounded shadow\"\n          @keydown.enter=\"addMessage\"\n          />\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script>\nimport { onMounted, reactive } from 'vue';\nimport firebase, { chatsRef } from '../utilities/firebase';\nexport default {\n  setup() {\n    const state = reactive({\n      chats: [],\n      message: \"\",\n      userId: null,\n    });\n    onMounted(async () => {\n      chatsRef.on('child_added', (snapshot) => {\n        state.userId = firebase.default.auth().currentUser.uid;\n        state.chats.push({ key:snapshot.key, ...snapshot.val() });\n      });\n    });\n\n    function addMessage() {\n      const newChat = chatsRef.push();\n      newChat.set({ userId: state.userId, message: state.message });\n      state.message = \"\";\n    }\n\n    return { state, addMessage };\n  },\n};\n</script>\n\n<style>\n\n</style>\n"]}]}